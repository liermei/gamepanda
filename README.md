# 🍄 超级玛丽 - 网页版

一个基于HTML5 Canvas的经典超级玛丽横版冒险游戏，完全使用原生JavaScript实现。

## 🎮 游戏特性

### 核心玩法
- **经典横版跳跃**: 流畅的跑跳操作，重现经典马里奥体验
- **物理系统**: 真实的重力、跳跃和碰撞检测
- **关卡设计**: 包含平台、砖块、深渊等多种地形
- **敌人系统**: 蘑菇怪巡逻，可以踩头消灭
- **道具系统**: 蘑菇让马里奥变大，星星提供无敌状态
- **终点旗杆**: 到达旗杆完成关卡

### 游戏元素

#### 🏃 马里奥
- 左右移动和跳跃控制
- 吃蘑菇变大获得额外生命值
- 受伤会变小，小马里奥再受伤则失去生命
- 星星道具提供10秒无敌时间
- 闪烁动画表示无敌状态

#### 🪙 收集系统
- **金币**: 撞击问号方块获得，每个200分
- **蘑菇**: 从问号方块出现，吃下变大（1000分）
- **星星**: 稀有道具，提供无敌状态（1000分）
- 每收集100个金币额外获得1条生命

#### 🐢 敌人
- **蘑菇怪**: 地面巡逻的敌人
- 可以踩头消灭（100分）
- 碰到身体会受伤
- 被消灭时产生粒子效果

#### 🧱 地形
- **地面**: 基础行走平台
- **漂浮平台**: 可以跳跃到达的高处平台
- **砖块**: 大马里奥可以撞碎（50分）
- **问号方块**: 撞击获得金币或道具
- **深渊**: 掉落会失去生命

#### 🚩 终点
- 到达旗杆完成关卡
- 剩余时间转换为奖励分数（每秒50分）

## 🎯 游戏目标

1. **生存**: 避免掉入深渊和被敌人伤害
2. **收集**: 尽可能收集更多金币
3. **消灭**: 踩头消灭敌人获得分数
4. **通关**: 到达终点旗杆完成关卡

## 🎮 控制方式

| 按键 | 功能 |
|------|------|
| ⬅️ / A | 向左移动 |
| ➡️ / D | 向右移动 |
| 空格 / W / ⬆️ | 跳跃 |

## 📊 计分系统

- 金币: 200分
- 踩死敌人: 100分
- 打碎砖块: 50分
- 蘑菇道具: 1000分
- 星星道具: 1000分
- 通关时间奖励: 剩余秒数 × 50分

## 🚀 如何运行

### 方法一: 直接打开
1. 下载所有文件到同一文件夹
2. 双击打开 `index.html` 文件
3. 开始游戏！

### 方法二: 使用本地服务器 (推荐)

**使用Python:**
```bash
# Python 3
python -m http.server 8000

# Python 2
python -m SimpleHTTPServer 8000
```

**使用Node.js:**
```bash
# 安装http-server
npm install -g http-server

# 运行服务器
http-server
```

**使用VSCode:**
1. 安装 "Live Server" 插件
2. 右键点击 `index.html`
3. 选择 "Open with Live Server"

然后在浏览器中打开 `http://localhost:8000`

## 📁 文件结构

```
超级玛丽/
│
├── index.html      # 主HTML文件
├── style.css       # 像素风格样式
├── game.js         # 游戏核心逻辑
└── README.md       # 说明文档
```

## 🎨 游戏特色

### 视觉效果
- **像素风格**: 经典的复古像素美术风格
- **流畅动画**: 角色移动和跳跃动画
- **粒子效果**: 砖块破碎、敌人被消灭时的粒子
- **金币动画**: 从问号方块弹出的金币动画
- **云朵背景**: 滚动的云朵增加深度感
- **摄像机跟随**: 平滑的镜头跟随效果

### 物理系统
- 重力和惯性模拟
- 精确的碰撞检测
- 上下左右四方向碰撞响应
- 跳跃抛物线
- 摩擦力效果

### 游戏机制
- **生命系统**: 3条初始生命
- **变身系统**: 小马里奥 ↔ 大马里奥
- **无敌系统**: 星星道具和受伤保护
- **计时系统**: 300秒倒计时
- **分数系统**: 多种得分方式
- **检查点**: 死亡后从检查点重生（保留分数）

## 🎯 游戏技巧

1. **踩头攻击**: 跳起踩在敌人头上是最安全的攻击方式
2. **连续跳跃**: 保持节奏连续跳跃可以更快通过关卡
3. **探索方块**: 撞击每个问号方块，可能有金币或蘑菇
4. **大马里奥优势**: 变大后可以撞碎砖块，还能承受一次伤害
5. **时间管理**: 注意倒计时，时间耗尽会失去生命
6. **深渊陷阱**: 小心深渊，无法跳过的深渊要找其他路线
7. **星星无敌**: 获得星星后可以直接冲撞敌人

## 🔧 技术栈

- HTML5 Canvas API
- CSS3 (像素风格、动画)
- 原生JavaScript (ES6+)
- 无依赖框架，纯原生实现

## 🎯 游戏机制详解

### 碰撞检测
- AABB (轴对齐包围盒) 碰撞检测
- 四方向碰撞响应
- 精确的平台判定

### 敌人AI
- 简单的巡逻逻辑
- 碰墙转向
- 与玩家交互判定

### 道具生成
- 从问号方块生成
- 物理移动模拟
- 自动收集检测

### 摄像机系统
- 平滑跟随玩家
- 限制在关卡范围内
- 视差滚动效果（云朵）

## 🌟 未来改进方向

- [ ] 更多关卡设计
- [ ] 更多敌人类型（乌龟、食人花等）
- [ ] 音效和背景音乐
- [ ] 隐藏关卡和秘密区域
- [ ] Boss战
- [ ] 本地最高分记录
- [ ] 关卡编辑器
- [ ] 多人对战模式

## 🐛 已知问题

- 快速移动时可能穿透薄墙（已优化）
- 极端情况下的碰撞边缘检测

## 📝 开发说明

### 主要类和方法

**SuperMarioGame 类**:
- `update()`: 更新游戏状态
- `draw()`: 渲染游戏画面
- `updatePlayer()`: 玩家物理和控制
- `updateEnemies()`: 敌人AI和碰撞
- `updateCamera()`: 摄像机跟随
- `gameLoop()`: 游戏主循环

### 性能优化
- 只渲染屏幕可见范围内的对象
- 优化的碰撞检测算法
- requestAnimationFrame 实现流畅60fps

## 📄 许可

此项目仅供学习和娱乐使用。

## 🎮 致敬

向任天堂的经典游戏《超级马里奥兄弟》致敬！

---

开始你的冒险，拯救蘑菇王国！🍄🏰
